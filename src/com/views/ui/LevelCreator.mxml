<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%"
	horizontalScrollPolicy="off" verticalScrollPolicy="off" xmlns:ui="com.views.ui.*"
	creationComplete="init();" xmlns:ns="com.views.ui.view_pane.*" show="onShow();">
	
	<mx:Script>
		<![CDATA[
		
			import com.views.sprites.TetrisBlock;
			import caurina.transitions.Tweener;
			import com.controllers.ApplicationController;
			import com.controllers.AudioController;
			import com.controllers.LevelCreatorController;
			import com.models.Model;
			import com.controllers.GameController;
			import com.Constants;
			import com.Embeds;
			import mx.binding.utils.BindingUtils;
			import com.utils.ColorUtil;
			import com.utils.StringUtil;
			
			private function init():void
			{
				LevelCreatorController.SINGLETON.init(this);
			}
			
			private function onShow():void
			{
				animate();
				ApplicationController.SINGLETON.enterEditMode(true);
				LevelCreatorController.SINGLETON.clearAll();
				mainPane.onColorChange();
			}
			
			private function animate():void
			{
				var t:Number = 1;
				var tran:String = 'easeOutBounce';
				
				AudioController.SINGLETON.playSfx(Constants.AUDIO_MACHINE);
				
				mainPane.rotationY = 90;
				Tweener.addTween(mainPane, {rotationY: 0, time:t, transition: tran});
			}
			
			public function showPopup(popupId:String):void
			{
				popups.visible = true;
				popups.selectedChild = popups.getChildByName(popupId) as Canvas;
			}
			
			public function hidePopup():void
			{
				popups.visible = false;
			}
			
		]]>
	</mx:Script>
	
	<mx:Canvas id="container" width="1024" height="768" horizontalCenter="0" verticalCenter="0"
		horizontalScrollPolicy="off" verticalScrollPolicy="off">
		
		<ns:MainPaneEdit id="mainPane" x="{mainPane.width + 11}" y="{frame.y + 53}"/>
		
		<ui:ViewPane id="viewPane" x="252" verticalCenter="17" editMode="true"/>
	
		<mx:Image id="frame" source="{Embeds.IMAGE_FRAME}" x="167" verticalCenter="0" mouseEnabled="false"
			maintainAspectRatio="true" smoothBitmapContent="true" mouseChildren="false"/>
				
	</mx:Canvas>
	
	<mx:ViewStack id="popups" width="100%" height="100%" visible="false">
		<ui:LevelCreatorPopup name="levelCreator"/>
	</mx:ViewStack>
	
</mx:Canvas>
